# Лабораторная работа №2

> Кэш - промежуточный буфер с быстрым доступом, содержащий информацию, которая может быть запрошена с наибольшей вероятностью. Доступ к данным в кэше осуществляется быстрее, чем выборка исходных данных из более медленной памяти или удаленного источника, однако её объём существенно ограничен по сравнению с хранилищем исходных данных.

### Задача

Для каждого из вариантов проходов (*прямой*, *обратный* и *случайный*) целочисленного массива 
провести исследование зависимости времени от размера.

Каждое исследование включает в себя серию эксперементов c определенными размерами.

Количество экспериментов в серии определяется следующим образом:

```cpp
1/2 * cache_sizes['1'] < 2^x < 2^(x+1) < ... < 2^(x+n) < 3/2 * cache_sizes['max']
```

### Пример

В примере ниже показано, что для процессора с тремя уровнями кэша (`2mb`, `4mb`, `8mb`)
необходимо провести серию из 5 эксперементов.

```cpp
cache_size['1'] = 2 mb;
cache_size['2'] = 4 mb;
cache_size['3'] = 8 mb;

// 1mb < 2mb < 4mb < 8mb < 12mb
```

### Эксперимент

Каждый эксперемент состоит из 3 шагов:

```cpp
1. Создание буфера
2. Прогревание кэша
// <-- время начала эксперемнта
3. Циклический проход (1000 итераций)
// <-- время окончание эксперемента
```

#### Шаг 1

Инициализация буфера может происходит, как с помощью чтения данных из файла в выделенную область памяти,
так и с помощью случайного заполнения с использованием генератора случайных чисел.

#### Шаг 2

Данный шаг необходимо выполнить для получения репрезентативных данных, т.к. кэш-память еще не заполнена.

#### Шаг 3

Для получения времени обхода от размера массива процедуру прохода необходимо многократно повторить (порядка 1000 раз).

### Результаты

Ниже представлен формат и пример отчета:

```yaml
investigation:                                       |  investigaion:
  travel_variant: <вариант_прохода>                  |    travel_order: "direction"
  experiments:                                       |    experiments:
  - experiment:                                      |    - experiment:
      number:                                        |        number: 1
      input_data:                                    |        input_data:
        buffer_size: <размер_буфера>                 |          buffer_size: "1mb"
      results:                                       |        results:
        duration: <продолжительность>                |          duration: "1ns"
  - experiment:                                      |    - experiment:
      number: <номер_эксперимента>                   |        number: 2
      input_data:                                    |        input_data:
        buffer_size: <размер_буфера>                 |          buffer_size: "2mb"
      results:                                       |        results:
        duration: <продолжительность>                |          duration: "2ns"
                                                     |
investigation:                                       |  investigation:
...                                                  |  ...
```

⚠️ В отчет также необходимо добавить общий график с результатами всех исследований. ⚠️

# ОТЧЁТ ПО ЛАБОРАТОРНОЙ

| number exp    | Buffer Size   |  Direct Time  | Revercse Time | Random Time   |
| ------------- | ------------- | ------------- | ------------- | ------------- |
| №1            | 16            | 19            | 19            | 19            |
| №2            | 32            | 38            | 38            | 38            |  
| №3            | 64            | 78            | 77            | 105           | 
| №4            | 128           | 154           | 154           | 238           | 
| №5            | 256           | 310           | 309           | 497           | 
| №6            | 512           | 627           | 620           | 1254          |
| №7            | 1024          | 1266          | 1245          | 3246          |
| №8            | 2048          | 2492          | 2515          | 12104         |
| №9            | 4096          | 5046          | 5184          | 61712         |
| №10           | 8192          | 10066         | 10757         | 507314        |
| №11           | 16384         | 50622         | 53762         | 1692395       |
| №12           | 32768         | 101006        | 107633        | 3993760       |
| №13           | 65536         | 202556        | 215011        | 8859150       | 

## Графики

direct: https://user-images.githubusercontent.com/32385043/51125868-b70c9f80-1832-11e9-92bf-b8c3b4c82e99.png
random: https://user-images.githubusercontent.com/32385043/51125881-c25fcb00-1832-11e9-925b-e3e56810b928.png
reverse: https://user-images.githubusercontent.com/32385043/51125890-c986d900-1832-11e9-96df-28a28a011673.png


